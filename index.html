
<!DOCTYPE html>
<html>
<head>
    <title>Gadgetron chain</title>
</head>
<body>
   <svg style="background-color:#fff"  version="1.1" width="781px" height="662px" viewBox="-0.5 -0.5 781 662" id='graph'>
      
      <g>
          <rect x="0" y="30" width="150" height="50" rx="7.5" ry="7.5" fill="#f5f5f5" stroke="#666666" pointer-events="all"/>
          <rect x="230" y="30" width="550" height="630" rx="82.5" ry="82.5" fill="#f5f5f5" stroke="#666666" pointer-events="all"/>
          <rect x="485" y="0" width="40" height="20" fill="none" stroke="none" pointer-events="all"/>
          <g transform="translate(-0.5 -0.5)">
              <switch>
                  <foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                      <div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:38px;height:1px;padding-top:10px;margin-left:486px">
                          <div style="box-sizing:border-box;font-size:0;text-align:center">
                              <div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal">
                                  <font size="1">
                                      <b style="font-size:14px">
                                          Gadgetron
                                      </b>
                                  </font>
                              </div>
                          </div>
                      </div>
                  </foreignObject>
                  <text x="505" y="14" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                      Gadget...
                  </text>
              </switch>
          </g>
          <rect x="55" y="0" width="40" height="20" fill="none" stroke="none" pointer-events="all"/>
          <g transform="translate(-0.5 -0.5)">
              <switch>
                  <foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                      <div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:38px;height:1px;padding-top:10px;margin-left:56px">
                          <div style="box-sizing:border-box;font-size:0;text-align:center">
                              <div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal">
                                  <font size="1">
                                      <b style="font-size:14px">
                                          Client
                                      </b>
                                  </font>
                              </div>
                          </div>
                      </div>
                  </foreignObject>
                  <text x="75" y="14" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                      Client
                  </text>
              </switch>
          </g>
          <path d="M 150 42.5 Q 505 42.48 505 59.9" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/>
          <path d="M 505 66.65 L 500.5 57.65 L 505 59.9 L 509.5 57.65 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/>
          <path d="M 505 550 Q 505 560 406.24 560 Q 307.48 560 307.48 313.76 Q 307.48 67.52 160.1 67.5" fill="none" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke"/>
          <path d="M 153.35 67.5 L 162.35 63 L 160.1 67.5 L 162.35 72 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-width="3" stroke-miterlimit="10" pointer-events="all"/>
          <circle cx="505" cy="110" fill="#ffffff" stroke="#000000" pointer-events="all" r="40"/>
          <g transform="translate(-0.5 -0.5)">
              <switch>
                  <foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                      <div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:78px;height:1px;padding-top:110px;margin-left:466px">
                          <div style="box-sizing:border-box;font-size:0;text-align:center">
                              <div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal">
                                  <b>
                                      Gadget
                                  </b>
                              </div>
                          </div>
                      </div>
                  </foreignObject>
                  <text x="505" y="114" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                      Gadget
                  </text>
              </switch>
          </g>
          <path d="M 505 250 Q 505 270 505 260 Q 505 250 505 263.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
          <path d="M 505 268.88 L 501.5 261.88 L 505 263.63 L 508.5 261.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
          <circle cx="505" cy="210" fill="#ffffff" stroke="#000000" pointer-events="all" r="40"/>
          <g transform="translate(-0.5 -0.5)">
              <switch>
                  <foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                      <div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:78px;height:1px;padding-top:210px;margin-left:466px">
                          <div style="box-sizing:border-box;font-size:0;text-align:center">
                              <div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal">
                                  <b>
                                      Gadget
                                  </b>
                              </div>
                          </div>
                      </div>
                  </foreignObject>
                  <text x="505" y="214" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                      Gadget
                  </text>
              </switch>
          </g>
          <path d="M 505 350 Q 505 370 505 360 Q 505 350 505 363.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
          <path d="M 505 368.88 L 501.5 361.88 L 505 363.63 L 508.5 361.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
          <circle cx="505" cy="310" fill="#ffffff" stroke="#000000" pointer-events="all" r="40"/>
          <g transform="translate(-0.5 -0.5)">
              <switch>
                  <foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                      <div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:78px;height:1px;padding-top:310px;margin-left:466px">
                          <div style="box-sizing:border-box;font-size:0;text-align:center">
                              <div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal">
                                  <b>
                                      Gadget
                                  </b>
                              </div>
                          </div>
                      </div>
                  </foreignObject>
                  <text x="505" y="314" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                      Gadget
                  </text>
              </switch>
          </g>
          <path d="M 505 450 Q 505 470 505 460 Q 505 450 505 463.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
          <path d="M 505 468.88 L 501.5 461.88 L 505 463.63 L 508.5 461.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
          <circle cx="505" cy="410" fill="#ffffff" stroke="#000000" pointer-events="all" r="40"/>
          <g transform="translate(-0.5 -0.5)">
              <switch>
                  <foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                      <div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:78px;height:1px;padding-top:410px;margin-left:466px">
                          <div style="box-sizing:border-box;font-size:0;text-align:center">
                              <div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal">
                                  <b>
                                      Gadget
                                  </b>
                              </div>
                          </div>
                      </div>
                  </foreignObject>
                  <text x="505" y="414" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                      Gadget
                  </text>
              </switch>
          </g>
          <circle cx="505" cy="510" fill="#ffffff" stroke="#000000" pointer-events="all" r="40"/>
          <g transform="translate(-0.5 -0.5)">
              <switch>
                  <foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                      <div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:78px;height:1px;padding-top:510px;margin-left:466px">
                          <div style="box-sizing:border-box;font-size:0;text-align:center">
                              <div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;word-wrap:normal">
                                  <b>
                                      Gadget
                                  </b>
                              </div>
                          </div>
                      </div>
                  </foreignObject>
                  <text x="505" y="514" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                      Gadget
                  </text>
              </switch>
          </g>
          <path d="M 505 150 L 505 163.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/>
          <path d="M 505 168.88 L 501.5 161.88 L 505 163.63 L 508.5 161.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/>
           
          
         
          
      </g>
      <switch>
          <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
          <a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank">
              <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                  Viewer does not support full SVG 1.1
              </text>
          </a>
      </switch>
      <circle cx="10" cy="230" fill="#d5e8d4" stroke="#82b366" pointer-events="all" r="10"/>
      <circle cx="10" cy="270" fill="#f8cecc" stroke="#b85450" pointer-events="all" r="10"/>
      <circle cx="10" cy="310" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all" r="10"/>
      <rect x="20" y="220" width="80" height="20" fill="none" stroke="none" pointer-events="all"/>
      <g transform="translate(-0.5 -0.5)">
          <switch>
              <foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                  <div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:230px;margin-left:60px">
                      <div style="box-sizing:border-box;font-size:0;text-align:center">
                          <div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap">
                              <div>
                                  : Acquisition
                              </div>
                          </div>
                      </div>
                  </div>
              </foreignObject>
              <text x="60" y="234" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                  : Acquisition
              </text>
          </switch>
      </g>
      <rect x="20" y="260" width="100" height="20" fill="none" stroke="none" pointer-events="all"/>
      <g transform="translate(-0.5 -0.5)">
          <switch>
              <foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                  <div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:270px;margin-left:70px">
                      <div style="box-sizing:border-box;font-size:0;text-align:center">
                          <div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap">
                              <div>
                                  : Kspace buffer
                                  <br/>
                              </div>
                          </div>
                      </div>
                  </div>
              </foreignObject>
              <text x="70" y="274" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                  : Kspace buffer
              </text>
          </switch>
      </g>
      <rect x="20" y="300" width="60" height="20" fill="none" stroke="none" pointer-events="all"/>
      <g transform="translate(-0.5 -0.5)">
          <switch>
              <foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                  <div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:310px;margin-left:50px">
                      <div style="box-sizing:border-box;font-size:0;text-align:center">
                          <div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:nowrap">
                              : Image
                          </div>
                      </div>
                  </div>
              </foreignObject>
              <text x="50" y="314" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">
                  : Image
              </text>
          </switch>
      </g>

      <path d="M 150 42.5 Q 505 42.48 505 59.9 V 210" fill="none" stroke="none" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke" id="incomming"/>
      <path d="M 505 550 Q 505 560 406.24 560 Q 307.48 560 307.48 313.76 Q 307.48 67.52 160.1 67.5" fill="none" stroke="none" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke" id="outgoing"/>
      <circle r="10" class="acquisition" fill="none" />
      <circle r="10" class="acquisition" fill="none"/>
      <circle r="10" class="acquisition" fill="none"/>
      <circle r="10" class="acquisition" fill="none"/>
      <circle r="10" class="acquisition" fill="none"/>
      <circle r="10" class="acquisition" fill="none"/>

      <circle cx="505" cy="210" r="10" class="bucket" fill="none" />

      <circle cx="505" cy="310" r="10" class="image" fill="none" />
      <circle cx="505" cy="310" r="10" class="image" fill="none" />
      <circle cx="505" cy="310" r="10" class="image" fill="none" />

     
      <circle r="10" class="acquisition2" fill="none" />
      <circle r="10" class="acquisition2" fill="none"/>
      <circle r="10" class="acquisition2" fill="none"/>
      <circle r="10" class="acquisition2" fill="none"/>
      <circle r="10" class="acquisition2" fill="none"/>
      <circle r="10" class="acquisition2" fill="none"/>

      <circle cx="505" cy="210" r="10" class="bucket2" fill="none" />

      <circle cx="505" cy="310" r="10" class="image2" fill="none" />
      <circle cx="505" cy="310" r="10" class="image2" fill="none" />
      <circle cx="505" cy="310" r="10" class="image2" fill="none" />
  </svg>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.0/anime.min.js"></script>
 <script>
     var path = anime.path("#incomming")
     var path_out = anime.path("#outgoing")
     var timeline = anime.timeline({autoplay: true, loop: true});

     timeline.add({
         targets: '.acquisition',

         keyframes: [
             {fill: "#d5e8d4",stroke: "#82b366", duration: 1},
         {translateX: path('x'),translateY: path('y'),duration: 3000},
         {fill: "none",stroke: "none", duration: 1, cx: -10000, cy: -10000},
         ],
         easing: 'easeOutQuint',
        delay: anime.stagger(100)

     });
     timeline.add({
         targets: '.bucket',
         keyframes: [
         {fill: "#F8CECC",stroke: "#B85450", duration: 500},
         {translateY: 100, duration: 1500},
         {fill: "none",stroke: "none", duration: 1, cx: -10000, cy: -10000},
         ],
         
         easing: 'easeOutQuint'
     });
     timeline.add({
         targets: '.image',
         keyframes: [
         {fill: "#DAE8FC",stroke: "#6C8EBF", duration: 500},
         {translateY: 100}
         ],
         duration: 2000,
         easing: 'easeOutQuint'
     });
     timeline.add({
         targets: '.image',
         keyframes: [
         {translateY: 200}
         ],
         duration: 1500,
         delay: anime.stagger(100),
         easing: 'easeOutQuint'
     });
     timeline.add({
         targets: '.image',
         keyframes: [
         
         {translateY: 240, duration: 300},
         {cy: 0, cx: 0, duration: 1},
         {translateX: path_out('x'), translateY: path_out('y'), duration: 3000}
         ],
         
         delay: anime.stagger(100),
         easing: 'easeOutQuint'
     });

     function resetZoom(e) {
        var zoom = anime({
            targets: '#graph',
            viewBox: "-0.5 -0.5 781 662",
            autoplay: true,
            easing: 'easeOutQuint'
        });
     }

        var timeline2 = anime.timeline({autoplay: false, loop: true});
        

     timeline2.add({
         targets: '.acquisition2',

         keyframes: [
             {fill: "#d5e8d4",stroke: "#82b366", duration: 1},
         {translateX: path('x'),translateY: path('y'),duration: 3000},
         {fill: "none",stroke: "none", duration: 1, cx: -10000, cy: -10000},
         ],
         easing: 'easeOutQuint',
        delay: anime.stagger(100)

     });
     timeline2.add({
         targets: '.bucket2',
         keyframes: [
         {fill: "#F8CECC",stroke: "#B85450", duration: 500},
         {translateY: 100, duration: 1500},
         {fill: "none",stroke: "none", duration: 1, cx: -10000, cy: -10000},
         ],
         
         easing: 'easeOutQuint'
     });
     timeline2.add({
         targets: '.image2',
         keyframes: [
         {fill: "#DAE8FC",stroke: "#6C8EBF", duration: 500},
         {translateY: 100}
         ],
         duration: 2000,
         easing: 'easeOutQuint'
     });
     timeline2.add({
         targets: '.image2',
         keyframes: [
         {translateY: 200}
         ],
         duration: 1500,
         delay: anime.stagger(100),
         easing: 'easeOutQuint'
     });
     timeline2.add({
         targets: '.image2',
         keyframes: [
         
         {translateY: 240, duration: 300},
         {cy: 0, cx: 0, duration: 1},
         {translateX: path_out('x'), translateY: path_out('y'), duration: 3000}
         ],
         
         delay: anime.stagger(100),
         easing: 'easeOutQuint'
     });


     function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

        document.onclick = inputChange

        sleep(5000).then(  timeline2.play);
  
     

     function inputChange(e) {
        var zoom = anime({
            targets: '#graph',
            viewBox: `${e.clientX-100} ${e.clientY-100} 200 200`,
            autoplay: true,
            easing: 'easeOutQuint'
        });

        document.onclick = resetZoom
    }

  
    
    document.onclick = inputChange;
    var is_paused = false;
    document.addEventListener("keydown", event => {
    if (event.keyCode === 85) {
        if (is_paused){ timeline.play(); timeline2.play();}
        else {timeline.pause(); timeline2.pause();}

        is_paused = !is_paused;
    }
  
    });
    


    //  timeline.add({
    //      targets: '.acquisition',
    //      translateY: 210,
    //      duration: 1000,
    //      easing: 'easeOutQuint',
         
    //  });
   
//  var timeline = anime.timeline({autoplay: true, loop: true});

//    timeline.add({
//      targets: '.acquisition', 
//       keyframes: [
//        {translateY: 20},
//        {translateX: 80,},
//        {delay: 100},
//        {translateY: 70}
//      ],
//      duration: 2000,
//      delay: anime.stagger(400),
//      easing:'easeInOutQuad'
//    });
//    timeline.add({
//      targets: '.acquisition', 
//       keyframes: [
//        {translateY: '+=70'}
//      ],
//      duration: 2000,
//      delay: anime.stagger(400),
//      easing:'easeInOutQuad'
//    });
</script>
 </body>
</html>
